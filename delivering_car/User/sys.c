/*
 * @Author: jar-chou 2722642511@qq.com
 * @Date: 2023-09-06 13:02:19
 * @LastEditors: jar-chou 2722642511@qq.com
 * @LastEditTime: 2023-09-22 19:04:52
 * @FilePath: \delivering_car\User\sys.c
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 */
#include "sys.h"
#include "stdio.h"
#include "oled_draw.h"
#include "oled_buffer.h"
#include "FreeRTOS.h"
#include "queue.h"
#include "JY62.h"
#include "PID.h"
#include "Driver.h"
#include "Software_iic.h"
#include <math.h>
#include <stdbool.h>

const uint8_t first_left_deliver_one[4][128] = {
0x00,0x80,0x40,0x70,0x38,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"先",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x20,0x20,0x20,0x20,0xE0,0xFC,0x7C,0x28,0x20,0x20,0x20,0x20,0x20,0x60,0x60,/*"左",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,/*"一",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x20,0x21,0x31,0x31,0x19,0x0F,0x07,0x01,0x0F,0x1F,0x31,0x31,0x71,0x71,0x71,0x30,/*"先",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0E,0x26,0x33,0x31,0x33,0x33,0x3F,0x3F,0x33,0x32,0x32,0x22,0x20,0x20,/*"左",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x03,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x03,0x03,0x03,/*"一",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/

0x00,0x00,0xB8,0xF8,0x50,0x50,0x50,0x50,0x58,0x58,0x58,0xD8,0xCC,0xC8,0xC0,0xC0,/*"后",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x60,0x20,0x20,0x20,0x20,0xA0,0xE0,0xFC,0x38,0x20,0x20,0x20,0x60,0x60,0x60,/*"右",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,/*"二",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x18,0x1E,0x0F,0x03,0x06,0x3E,0x32,0x32,0x32,0x32,0x32,0x32,0x3E,0x3E,0x00,0x01,/*"后",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0C,0x0C,0x06,0x02,0x3F,0x3F,0x22,0x22,0x22,0x22,0x22,0x7E,0x3E,0x00,/*"右",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x0C,0x0C,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x0C,0x0C,0x0C,0x0C,0x1C,0x1C,/*"二",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/
};

const uint8_t first_left_deliver_two[4][128] = {
0x00,0x80,0x40,0x70,0x38,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"先",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x20,0x20,0x20,0x20,0xE0,0xFC,0x7C,0x28,0x20,0x20,0x20,0x20,0x20,0x60,0x60,/*"左",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,/*"二",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x20,0x21,0x31,0x31,0x19,0x0F,0x07,0x01,0x0F,0x1F,0x31,0x31,0x71,0x71,0x71,0x30,/*"先",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0E,0x26,0x33,0x31,0x33,0x33,0x3F,0x3F,0x33,0x32,0x32,0x22,0x20,0x20,/*"左",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x0C,0x0C,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x0C,0x0C,0x0C,0x0C,0x1C,0x1C,/*"二",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/

0x00,0x00,0xB8,0xF8,0x50,0x50,0x50,0x50,0x58,0x58,0x58,0xD8,0xCC,0xC8,0xC0,0xC0,/*"后",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x60,0x20,0x20,0x20,0x20,0xA0,0xE0,0xFC,0x38,0x20,0x20,0x20,0x60,0x60,0x60,/*"右",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,/*"一",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x18,0x1E,0x0F,0x03,0x06,0x3E,0x32,0x32,0x32,0x32,0x32,0x32,0x3E,0x3E,0x00,0x01,/*"后",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0C,0x0C,0x06,0x02,0x3F,0x3F,0x22,0x22,0x22,0x22,0x22,0x7E,0x3E,0x00,/*"右",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x03,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x03,0x03,0x03,/*"一",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/
};

const uint8_t first_right_deliver_one[4][128] = {
0x00,0x80,0x40,0x70,0x38,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"先",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x60,0x20,0x20,0x20,0x20,0xA0,0xE0,0xFC,0x38,0x20,0x20,0x20,0x60,0x60,0x60,/*"右",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,/*"一",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x20,0x21,0x31,0x31,0x19,0x0F,0x07,0x01,0x0F,0x1F,0x31,0x31,0x71,0x71,0x71,0x30,/*"先",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0C,0x0C,0x06,0x02,0x3F,0x3F,0x22,0x22,0x22,0x22,0x22,0x7E,0x3E,0x00,/*"右",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x03,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x03,0x03,0x03,/*"一",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/

0x00,0x00,0xB8,0xF8,0x50,0x50,0x50,0x50,0x58,0x58,0x58,0xD8,0xCC,0xC8,0xC0,0xC0,/*"后",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x20,0x20,0x20,0x20,0xE0,0xFC,0x7C,0x28,0x20,0x20,0x20,0x20,0x20,0x60,0x60,/*"左",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,/*"二",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x18,0x1E,0x0F,0x03,0x06,0x3E,0x32,0x32,0x32,0x32,0x32,0x32,0x3E,0x3E,0x00,0x01,/*"后",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0E,0x26,0x33,0x31,0x33,0x33,0x3F,0x3F,0x33,0x32,0x32,0x22,0x20,0x20,/*"左",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x0C,0x0C,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x0C,0x0C,0x0C,0x0C,0x1C,0x1C,/*"二",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/
};

const uint8_t first_right_deliver_two[4][128] = {
0x00,0x80,0x40,0x70,0x38,0x20,0x20,0xFC,0xFC,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"先",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x60,0x20,0x20,0x20,0x20,0xA0,0xE0,0xFC,0x38,0x20,0x20,0x20,0x60,0x60,0x60,/*"右",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,/*"二",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x20,0x21,0x31,0x31,0x19,0x0F,0x07,0x01,0x0F,0x1F,0x31,0x31,0x71,0x71,0x71,0x30,/*"先",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0C,0x0C,0x06,0x02,0x3F,0x3F,0x22,0x22,0x22,0x22,0x22,0x7E,0x3E,0x00,/*"右",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x0C,0x0C,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x0C,0x0C,0x0C,0x0C,0x1C,0x1C,/*"二",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/

0x00,0x00,0xB8,0xF8,0x50,0x50,0x50,0x50,0x58,0x58,0x58,0xD8,0xCC,0xC8,0xC0,0xC0,/*"后",0*/
0x00,0x00,0x60,0x20,0x20,0x20,0x20,0xFC,0xF8,0x20,0x20,0x20,0x20,0x20,0x00,0x00,/*"去",1*/
0x60,0x20,0x20,0x20,0x20,0xE0,0xFC,0x7C,0x28,0x20,0x20,0x20,0x20,0x20,0x60,0x60,/*"左",2*/
0x80,0x90,0x90,0xB0,0xA0,0x00,0x20,0x30,0x10,0xD0,0x78,0x3C,0x28,0xE0,0xE0,0x00,/*"边",3*/
0x40,0x48,0x58,0xD0,0x50,0x80,0xE0,0xAC,0xB0,0xE0,0xE0,0xBC,0xAC,0xA0,0x80,0x00,/*"送",4*/
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,/*"一",5*/
0xC0,0xC0,0xC4,0xFC,0x74,0xD4,0xE4,0x64,0xD4,0xD4,0xF4,0xFC,0xCC,0x80,0x80,0x80,/*"号",6*/
0x30,0x30,0x18,0xF8,0xF8,0x0C,0x40,0x40,0x38,0x7C,0x70,0xD0,0xD8,0xC8,0xC0,0xC0,/*"货",7*/
0x18,0x1E,0x0F,0x03,0x06,0x3E,0x32,0x32,0x32,0x32,0x32,0x32,0x3E,0x3E,0x00,0x01,/*"后",0*/
0x03,0x01,0x31,0x31,0x31,0x39,0x25,0x67,0x23,0x25,0x3D,0x19,0x11,0x33,0x03,0x03,/*"去",1*/
0x0C,0x0C,0x0E,0x26,0x33,0x31,0x33,0x33,0x3F,0x3F,0x33,0x32,0x32,0x22,0x20,0x20,/*"左",2*/
0x08,0x08,0x08,0x0F,0x0C,0x0C,0x1C,0x12,0x13,0x15,0x18,0x3C,0x37,0x33,0x30,0x30,/*"边",3*/
0x08,0x08,0x09,0x0F,0x08,0x08,0x18,0x14,0x16,0x33,0x33,0x36,0x74,0x7C,0x78,0x30,/*"送",4*/
0x03,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x03,0x03,0x03,/*"一",5*/
0x00,0x00,0x08,0x18,0x10,0x13,0x33,0x31,0x31,0x33,0x1B,0x1E,0x06,0x00,0x01,0x01,/*"号",6*/
0x00,0x40,0x40,0x7F,0x2F,0x21,0x39,0x1F,0x23,0x31,0x2F,0x2F,0x40,0x40,0x00,0x00,/*"货",7*/
};


//阿拉伯数字1，size:32*32
const uint8_t bigone[4][32] = {
	0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xF0,0xF0,0xF0,
	0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,
	0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,
	0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x0C,0x0F,0x0F,0x0F,
	0x0F,0x0F,0x0C,0x0C,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,/*"1",0*/
};

//阿拉伯数字2，size:32*32
const uint8_t bigtwo[4][32] = {
	0x00,0x00,0x00,0x80,0xC0,0xE0,0xE0,0x30,0x10,0x10,0x18,0x08,0x08,0x08,0x08,0x08,
	0x08,0x08,0x08,0x18,0x18,0x30,0x70,0xF0,0xF0,0xE0,0xC0,0x80,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x03,0x07,0x07,0x07,0x07,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x80,0x80,0xC0,0xE0,0xF8,0x7F,0x3F,0x3F,0x1F,0x07,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0x60,0x60,0x30,0x30,0x18,0x0C,0x0C,0x06,
	0x06,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,
	0x00,0x00,0x0C,0x0E,0x0F,0x0D,0x0D,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,
	0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0E,0x0E,0x0F,0x07,0x00,0x00,0x00,0x00,/*"2",0*/
};

struct COLOR RGB;
int count = 0;
extern float VOFA_Data[4];
extern volatile u8 already_turned, Y_have_achieved, X_have_achieved, Y_Laser_have_achieved, X_Laser_have_achieved;
extern int32_t Y_Speed;
extern int32_t X_Speed;
extern int32_t angle_speed;

extern struct PID Coord, Turn_Angle_PID;
extern int32_t position_of_car[3];
extern int32_t CCR_wheel[4];

extern bool check_rgb(int color);
extern u8 dataFromLinux[4];       //the data get from linux


void OLED_SHOW_TASK()
{
    ClearScreenBuffer(0x00);
    char buff[20];
		float current_angle = (float)stcAngle.Angle[2] / 32768 * 180;
		sprintf(buff, "R:%3dG:%3dB:%3d", RGB.R,RGB.G,RGB.B);
    DrawString(0, 0, buff);
    sprintf(buff, "RD:%4d", (int)VOFA_Data[2]);
    DrawString(1, 0, buff);
    sprintf(buff, "FD:%4d", (int)VOFA_Data[3]);
    DrawString(1, 8, buff);
		if (check_whetherCharArrayInRange(dataFromLinux, 4, '1', '2'))
		{
            #if 0
			if(dataFromLinux[0] == '1')
				if(dataFromLinux[1] == '1')
					WriteMultByteBuffer(4, 0, (const uint8_t*)first_left_deliver_one, sizeof(first_left_deliver_one));
				else
					WriteMultByteBuffer(4, 0, (const uint8_t*)first_right_deliver_one, sizeof(first_right_deliver_one));
			else
				if(dataFromLinux[1] == '1')
					WriteMultByteBuffer(4, 0, (const uint8_t*)first_left_deliver_two, sizeof(first_left_deliver_two));
				else
					WriteMultByteBuffer(4, 0, (const uint8_t*)first_right_deliver_two, sizeof(first_right_deliver_two));
            #else
            if(dataFromLinux[0] == '1')
                DrawPicture(4, 0, 32, 32, (const uint8_t*)bigone);
            else
                DrawPicture(4, 0, 32, 32, (const uint8_t*)bigtwo);
            if(dataFromLinux[1] == '1')
                DrawPicture(4, 32, 32, 32, (const uint8_t*)bigone);
            else
                DrawPicture(4, 32, 32, 32, (const uint8_t*)bigtwo);
            if(dataFromLinux[2] == '1')
                DrawPicture(4, 64, 32, 32, (const uint8_t*)bigone);
            else
                DrawPicture(4, 64, 32, 32, (const uint8_t*)bigtwo);
            if(dataFromLinux[3] == '1')
                DrawPicture(4, 96, 32, 32, (const uint8_t*)bigone);
            else
                DrawPicture(4, 96, 32, 32, (const uint8_t*)bigtwo);
            #endif
		}
    UpdateScreenDisplay();
}

void Read_RGB()
{
    IIC_Read_Len(0X5A, 0X0C, 3, (u8*)&RGB);
}
void Forward()
{
    Advance(2);
    Advance(3);
    Advance(4);
    Advance(5);
}
void Reverse()
{
    Back(2);
    Back(3);
    Back(4);
    Back(5);
}
void Turn_Right_Founction()
{
    Back(2);
    Advance(3);
    Advance(4);
    Back(5);
}
void Turn_Left_Founction()
{
    Advance(2);
    Back(3);
    Back(4);
    Advance(5);
}
void Walking_Right()
{
    Advance(2);
    Back(3);
    Advance(4);
    Back(5);
}
void Walking_Left()
{
    Back(2);
    Advance(3);
    Back(4);
    Advance(5);
}



//-------以下是HSV颜色空间和RGB颜色空间相互转换接口------------
/**
 * @brief HSV颜色空间
*/
typedef struct {
    float h;    // 色调H(hue)  0~360° {R(0°),G(120°),B(240°)}
    float s;    // 饱和度S(saturation)  0~1.0
    float v;    // 明度V(value)  0~1.0  
}color_hsv_t;

typedef struct {
    unsigned char r;    // 0-255
    unsigned char g;    // 0-255
    unsigned char b;    // 0-255
    unsigned int color; // 0x000000 ~ 0xffffff
}color_rgb_t;


/**
 * @brief   RGB颜色空间 转  HSV颜色空间 
 * @param   rgb:RGB颜色空间参数
 * @param   hsv:HSV颜色空间参数
 * @return  none
*/
void rgb2hsv(color_rgb_t *rgb, color_hsv_t *hsv);

/**
 * @brief   HSV颜色空间 转 RGB颜色空间
 * @param   hsv:HSV颜色空间参数
 * @param   rgb:RGB颜色空间参数
 * @return  none
*/
void hsv2rgb(color_hsv_t *hsv, color_rgb_t *rgb);

/**
 * @brief   调节HSV颜色空间 H值(0.0~360.0)
 * @param   hsv:HSV颜色空间参数
 * @param   h_offset:调节参数 增加>0.0，减小<0.0
 * @return  none
*/
void hsv_adjust_h(color_hsv_t *hsv, float h_offset);

/**
 * @brief   调节HSV颜色空间 S值(0.0~1.0)
 * @param   hsv:HSV颜色空间参数
 * @param   s_offset:调节参数 增加>0.0，减小<0.0
 * @return  none
*/
void hsv_adjust_s(color_hsv_t *hsv, float s_offset);

/**
 * @brief   调节HSV颜色空间 V值(0.0~1.0)
 * @param   hsv:HSV颜色空间参数
 * @param   v_offset:调节参数 增加>0.0，减小<0.0
 * @return  none
*/
void hsv_adjust_v(color_hsv_t *hsv, float v_offset);



// 以下是HSV颜色空间和RGB颜色空间相互转换接口
/*********************************************************************************************
红：    
    R   255         H:0
    G   0           S:100
    B   0           V:100    
绿：
    R   0           H:120   
    G   255         S:100
    B   0           V:100    
蓝：
    R   0           H:240   
    G   0           S:100
    B   255         V:100    
*********************************************************************************************/

#define max(a,b) ((a) > (b) ? (a) : (b))
#define min(a,b) ((a) < (b) ? (a) : (b))
#define max3(a,b,c) (((a) > (b) ? (a) : (b)) > (c) ? ((a) > (b) ? (a) : (b)) : (c))
#define min3(a,b,c) (((a) < (b) ? (a) : (b)) < (c) ? ((a) < (b) ? (a) : (b)) : (c))


/*********************************************************************************************
RGB转化到HSV的算法:
    max=max(R,G,B)；
    min=min(R,G,B)；
    V=max(R,G,B)；
    S=(max-min)/max；
    if (R = max) H =(G-B)/(max-min)* 60；
    if (G = max) H = 120+(B-R)/(max-min)* 60；
    if (B = max) H = 240 +(R-G)/(max-min)* 60；
    if (H < 0) H = H + 360；
***********************************************************************************************/

/**
 * @brief   RGB颜色空间 转  HSV颜色空间 
 * @param   rgb:RGB颜色空间参数
 * @param   hsv:HSV颜色空间参数
 * @note    The R,G,B values are divided by 255 to change the range from 0..255 to 0..1:
 * @return  none
*/
void rgb2hsv(color_rgb_t *rgb, color_hsv_t *hsv)
{
    float max, min, delta=0;
    float r = (float)((float)((int)rgb->r)/255);
    float g = (float)((float)((int)rgb->g)/255);
    float b = (float)((float)((int)rgb->b)/255);

    max = max3(r, g, b);
    min = min3(r, g, b);
    delta = (max - min);

    //printf("r:%f, g:%f, b:%f\n", r, g, b);

    if (delta == 0) {
        hsv->h = 0;
    } else {
        if (r == max) {
            hsv->h = ((g-b)/delta)*60; 
        } else if (g == max) {
            hsv->h = 120+(((b-r)/delta)*60); 
        } else if (b == max) {
            hsv->h = 240 + (((r-g)/delta)*60);
        }

        if (hsv->h < 0) {
            hsv->h += 360;
        }
    }

    if (max == 0) {
        hsv->s = 0;
    } else {
        hsv->s = (float)(delta/max);
    }

    hsv->v = max;

    rgb->color = (unsigned int)(((rgb->r&0xff)<<16) | ((rgb->g&0xff)<<8) | (rgb->b&0xff));
}


/*************************************************************************
HSV转化到RGB的算法:
    if (s = 0)
    R=G=B=V;
    else
    H /= 60;
    i = INTEGER(H);
    f = H - i;
    a = V * ( 1 - s );
    b = V * ( 1 - s * f );
    c = V * ( 1 - s * (1 - f ) );
    switch(i)
    case 0: R = V; G = c; B = a;
    case 1: R = b; G = v; B = a;
    case 2: R = a; G = v; B = c;
    case 3: R = a; G = b; B = v;
    case 4: R = c; G = a; B = v;
    case 5: R = v; G = a; B = b;
*******************************************************************************/

/**
 * @brief   HSV颜色空间 转 RGB颜色空间
 * @param   hsv:HSV颜色空间参数
 * @param   rgb:RGB颜色空间参数
 * @note    When 0 ≤ H < 360, 0 ≤ S ≤ 1 and 0 ≤ V ≤ 1:
 * @return  none
*/
void hsv2rgb(color_hsv_t *hsv, color_rgb_t *rgb)
{
    int i;
    float f,a,b,c;

    float h = hsv->h;
    float s = hsv->s;
    float v = hsv->v;
	if (h >= 360) {
		h = 0;
	}
	
    if (s == 0) {
        rgb->r = (unsigned char)((int)(v*255));
        rgb->g = (unsigned char)((int)(v*255));
        rgb->b = (unsigned char)((int)(v*255));
    } else {
        h /= 60.0;  // sector 0 to 5, h_max=360 360/60=6[0,1,2,3,4,5]
        i = (int)floor(h); // floor(h)
        f = h-i; // factorial path of h
        a = v * (1-s);
        b = v * (1-s*f);
        c = v * (1-s*(1-f));
        switch(i) {
            case 0:
                rgb->r = (unsigned char)((int)(v*255)); //v*255
                rgb->g = (unsigned char)((int)(c*255)); //c*255;
                rgb->b = (unsigned char)((int)(a*255)); //a*255;
                break;
            case 1:
                rgb->r = (unsigned char)((int)(b*255)); //b*255;
                rgb->g = (unsigned char)((int)(v*255)); //v*255;
                rgb->b = (unsigned char)((int)(a*255)); //a*255;
                break;
            case 2:
                rgb->r = (unsigned char)((int)(a*255)); //a*255;
                rgb->g = (unsigned char)((int)(v*255)); //v*255;
                rgb->b = (unsigned char)((int)(c*255)); //c*255;
                break;
            case 3:
                rgb->r = (unsigned char)((int)(a*255));//a*255;
                rgb->g = (unsigned char)((int)(b*255));//b*255;
                rgb->b = (unsigned char)((int)(v*255));//v*255;
                break;
            case 4:
                rgb->r = (unsigned char)((int)(c*255)); //c*255;
                rgb->g = (unsigned char)((int)(a*255)); //a*255;
                rgb->b = (unsigned char)((int)(v*255)); //v*255;
                break;
            default:
                rgb->r = (unsigned char)((int)(v*255)); //v*255;
                rgb->g = (unsigned char)((int)(a*255)); //a*255;
                rgb->b = (unsigned char)((int)(b*255)); //b*255;
                break;
        }

    }

    rgb->color = (unsigned int)(((rgb->r&0xff)<<16) | ((rgb->g&0xff)<<8) | (rgb->b&0xff));
}

/**
 * @brief   调节HSV颜色空间 H值(0.0~360.0)
 * @param   hsv:HSV颜色空间参数
 * @param   h_offset:调节参数 增加>0.0，减小<0.0
 * @return  none
*/
void hsv_adjust_h(color_hsv_t *hsv, float h_offset)
{
    hsv->h += h_offset;
    if (hsv->h >= 360) {
        hsv->h = 360;
    } else if (hsv->h<=0) {
        hsv->h = 0;
    }
}


/**
 * @brief   调节HSV颜色空间 S值(0.0~1.0)
 * @param   hsv:HSV颜色空间参数
 * @param   s_offset:调节参数 增加>0.0，减小<0.0
 * @return  none
*/
void hsv_adjust_s(color_hsv_t *hsv, float s_offset)
{
    hsv->s += s_offset;
    if (hsv->s >= 1.0) {
        hsv->s = 1.0;
    } else if (hsv->s <= 0) {
        hsv->s = 0;
    }
}


/**
 * @brief   调节HSV颜色空间 V值(0.0~1.0)
 * @param   hsv:HSV颜色空间参数
 * @param   v_offset:调节参数 增加>0.0，减小<0.0
 * @return  none
*/
void hsv_adjust_v(color_hsv_t *hsv, float v_offset)
{
    hsv->v += v_offset;
    if (hsv->v >= 1.0) {
        hsv->v = 1.0;
    } else if (hsv->v<=0) {
        hsv->v = 0;
    }
}
//--------------------file end----------------------------
